# ü¶å –î–µ—Ç–∞–ª—å–Ω–µ –ø–æ—è—Å–Ω–µ–Ω–Ω—è –∞–Ω—ñ–º–∞—Ü—ñ—ó –æ–ª–µ–Ω—è –Ω–∞ Canvas

## üìö –ö–æ–Ω—Ü–µ–ø—Ü—ñ—è —Å–ø—Ä–∞–π—Ç-–ª–∏—Å—Ç–∞ (Sprite Sheet)

### –©–æ —Ç–∞–∫–µ —Å–ø—Ä–∞–π—Ç-–ª–∏—Å—Ç?
–°–ø—Ä–∞–π—Ç-–ª–∏—Å—Ç - —Ü–µ –æ–¥–Ω–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è, —è–∫–µ –º—ñ—Å—Ç–∏—Ç—å –±–∞–≥–∞—Ç–æ –∫–∞–¥—Ä—ñ–≤ –∞–Ω—ñ–º–∞—Ü—ñ—ó, —Ä–æ–∑—Ç–∞—à–æ–≤–∞–Ω–∏—Ö –≤ —Å—ñ—Ç—Ü—ñ.

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  [0,0]  [0,1]  [0,2]  [0,3]  [0,4]     ‚îÇ ‚Üê –†—è–¥–æ–∫ 0 (–≤–ª—ñ–≤–æ)
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  [1,0]  [1,1]  [1,2]  [1,3]  [1,4]     ‚îÇ ‚Üê –†—è–¥–æ–∫ 1 (–≤–ø—Ä–∞–≤–æ)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ù–∞—à —Å–ø—Ä–∞–π—Ç-–ª–∏—Å—Ç:**
- –†–æ–∑–º—ñ—Ä: 1100√ó468 –ø—ñ–∫—Å–µ–ª—ñ–≤
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞: 5 –∫–∞–¥—Ä—ñ–≤ –≤ —Ä—è–¥–∫—É √ó 2 —Ä—è–¥–∏ = 10 –∫–∞–¥—Ä—ñ–≤ –∑–∞–≥–∞–ª–æ–º
- –†–æ–∑–º—ñ—Ä –æ–¥–Ω–æ–≥–æ –∫–∞–¥—Ä—É: 220√ó234 –ø—ñ–∫—Å–µ–ª—ñ–≤ (1100/5 = 220, 468/2 = 234)

---

## üéØ –û—Å–Ω–æ–≤–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –∞–Ω—ñ–º–∞—Ü—ñ—ó

### 1. **Canvas —Ç–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç**

```javascript
const canvas = document.querySelector('#participateCanvas');
const ctx = canvas.getContext('2d');
canvas.width = 1366;
canvas.height = 500;
```

**–©–æ —Ü–µ —Ä–æ–±–∏—Ç—å:**
- –û—Ç—Ä–∏–º—É—î–º–æ –µ–ª–µ–º–µ–Ω—Ç canvas –∑ DOM
- –°—Ç–≤–æ—Ä—é—î–º–æ 2D –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –º–∞–ª—é–≤–∞–Ω–Ω—è
- –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ —Ä–æ–∑–º—ñ—Ä–∏ canvas

**–ß–æ–º—É –≤–∞–∂–ª–∏–≤–æ:**
- Canvas - —Ü–µ HTML5 –µ–ª–µ–º–µ–Ω—Ç –¥–ª—è –º–∞–ª—é–≤–∞–Ω–Ω—è
- –ö–æ–Ω—Ç–µ–∫—Å—Ç (`ctx`) - —Ü–µ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –º–∞–ª—é–≤–∞–Ω–Ω—è –Ω–∞ canvas
- –†–æ–∑–º—ñ—Ä–∏ canvas –≤–∏–∑–Ω–∞—á–∞—é—Ç—å –æ–±–ª–∞—Å—Ç—å –º–∞–ª—é–≤–∞–Ω–Ω—è

---

### 2. **–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —Ä–æ–∑–º—ñ—Ä—ñ–≤ –∫–∞–¥—Ä—ñ–≤**

```javascript
const FRAMES_PER_ROW = 5;  // 5 –∫–∞–¥—Ä—ñ–≤ –≤ —Ä—è–¥–∫—É
const TOTAL_ROWS = 2;       // 2 —Ä—è–¥–∏
const SPRITE_SHEET_WIDTH = 1100;
const SPRITE_SHEET_HEIGHT = 468;

const FRAME_WIDTH = Math.floor(SPRITE_SHEET_WIDTH / FRAMES_PER_ROW);  // 220px
const FRAME_HEIGHT = Math.floor(SPRITE_SHEET_HEIGHT / TOTAL_ROWS);    // 234px
```

**–õ–æ–≥—ñ–∫–∞:**
- –î—ñ–ª–∏–º–æ –∑–∞–≥–∞–ª—å–Ω—É —à–∏—Ä–∏–Ω—É –Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫–∞–¥—Ä—ñ–≤ ‚Üí –æ—Ç—Ä–∏–º—É—î–º–æ —à–∏—Ä–∏–Ω—É –æ–¥–Ω–æ–≥–æ –∫–∞–¥—Ä—É
- –î—ñ–ª–∏–º–æ –∑–∞–≥–∞–ª—å–Ω—É –≤–∏—Å–æ—Ç—É –Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ä—è–¥–∫—ñ–≤ ‚Üí –æ—Ç—Ä–∏–º—É—î–º–æ –≤–∏—Å–æ—Ç—É –æ–¥–Ω–æ–≥–æ –∫–∞–¥—Ä—É

**–ü—Ä–∏–∫–ª–∞–¥:**
```
–®–∏—Ä–∏–Ω–∞ —Å–ø—Ä–∞–π—Ç-–ª–∏—Å—Ç–∞: 1100px
–ö–∞–¥—Ä—ñ–≤ –≤ —Ä—è–¥–∫—É: 5
–®–∏—Ä–∏–Ω–∞ –∫–∞–¥—Ä—É: 1100 / 5 = 220px

–í–∏—Å–æ—Ç–∞ —Å–ø—Ä–∞–π—Ç-–ª–∏—Å—Ç–∞: 468px
–†—è–¥–∫—ñ–≤: 2
–í–∏—Å–æ—Ç–∞ –∫–∞–¥—Ä—É: 468 / 2 = 234px
```

---

### 3. **–ú–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è –¥–ª—è canvas**

```javascript
const DEER_SCALE = 0.5;  // –ú–∞—Å—à—Ç–∞–± 50%
const DEER_WIDTH = Math.floor(FRAME_WIDTH * DEER_SCALE);   // 110px
const DEER_HEIGHT = Math.floor(FRAME_HEIGHT * DEER_SCALE); // 117px
```

**–ß–æ–º—É —Ü–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ:**
- –ö–∞–¥—Ä–∏ –≤ —Å–ø—Ä–∞–π—Ç-–ª–∏—Å—Ç—ñ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –∑–∞–Ω–∞–¥—Ç–æ –≤–µ–ª–∏–∫—ñ –¥–ª—è canvas
- –ú–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è –¥–æ–∑–≤–æ–ª—è—î –∑–º–µ–Ω—à–∏—Ç–∏ —Ä–æ–∑–º—ñ—Ä –±–µ–∑ –≤—Ç—Ä–∞—Ç–∏ —è–∫–æ—Å—Ç—ñ
- `0.5` –æ–∑–Ω–∞—á–∞—î 50% –≤—ñ–¥ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–æ–∑–º—ñ—Ä—É

---

### 4. **–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å**

```javascript
const images = {
    background: new Image(),
    tree: new Image(),
    deerSprite: new Image()
};

let imagesLoaded = 0;
const totalImages = 3;

function onImageLoad() {
    imagesLoaded++;
    if (imagesLoaded === totalImages) {
        // –í—Å—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—ñ - –º–æ–∂–Ω–∞ –ø–æ—á–∏–Ω–∞—Ç–∏ –∞–Ω—ñ–º–∞—Ü—ñ—é
        drawCanvas();
        startAnimation();
    }
}

// –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–¥—ñ–π –ü–ï–†–ï–î –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è–º src
images.background.onload = onImageLoad;
images.tree.onload = onImageLoad;
images.deerSprite.onload = onImageLoad;

// –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ src - —Ü–µ –∑–∞–ø—É—Å–∫–∞—î –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
images.background.src = 'img/participate/canvas-bg.png';
images.tree.src = 'img/participate/tree.png';
images.deerSprite.src = 'img/participate/deer-sprite.png';
```

**–í–∞–∂–ª–∏–≤–æ:**
- –û–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–¥—ñ–π (`onload`) –≤—Å—Ç–∞–Ω–æ–≤–ª—é—é—Ç—å—Å—è –ü–ï–†–ï–î –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è–º `src`
- –ö–æ–ª–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ `src`, –±—Ä–∞—É–∑–µ—Ä –ø–æ—á–∏–Ω–∞—î –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
- –ü—ñ—Å–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è `onload`
- –ß–µ–∫–∞—î–º–æ, –ø–æ–∫–∏ –≤—Å—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∞—Ç—å—Å—è

---

## üé¨ –°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–Ω—ñ–≤ (State Machine)

### –î–≤–∞ —Å—Ç–∞–Ω–∏ –æ–ª–µ–Ω—è:

```javascript
const DEER_STATE = {
    WALKING: 'walking',  // –û–ª–µ–Ω—å —Ä—É—Ö–∞—î—Ç—å—Å—è
    IDLE: 'idle'         // –û–ª–µ–Ω—å —Å—Ç–æ—ó—Ç—å
};

let deerState = DEER_STATE.WALKING;  // –ü–æ—á–∞—Ç–∫–æ–≤–∏–π —Å—Ç–∞–Ω
```

**–õ–æ–≥—ñ–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥—ñ–≤:**
```
WALKING ‚Üí (–¥–æ—Å—è–≥–Ω—É–≤ –∫—Ä–∞—é) ‚Üí IDLE ‚Üí (—á–µ–∫–∞—î 1-3 —Å–µ–∫) ‚Üí WALKING (–∑–≤–æ—Ä–æ—Ç–Ω–∏–π –Ω–∞–ø—Ä—è–º–æ–∫)
```

---

## üé® –í–∏–±—ñ—Ä –∫–∞–¥—Ä—É –∑—ñ —Å–ø—Ä–∞–π—Ç-–ª–∏—Å—Ç–∞

### –§—É–Ω–∫—Ü—ñ—è `getSpriteFrameIndex()`

```javascript
function getSpriteFrameIndex() {
    // 1. –í–∏–∑–Ω–∞—á–∞—î–º–æ —Ä—è–¥–æ–∫ –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –Ω–∞–ø—Ä—è–º–∫—É
    const row = deerDirection === -1 ? 0 : 1;
    // -1 = –≤–ª—ñ–≤–æ ‚Üí —Ä—è–¥–æ–∫ 0 (–≤–µ—Ä—Ö–Ω—ñ–π)
    //  1 = –≤–ø—Ä–∞–≤–æ ‚Üí —Ä—è–¥–æ–∫ 1 (–Ω–∏–∂–Ω—ñ–π)
    
    let col = 0;  // –ö–æ–ª–æ–Ω–∫–∞ (—ñ–Ω–¥–µ–∫—Å –∫–∞–¥—Ä—É)
    
    if (deerState === DEER_STATE.WALKING) {
        // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –∫–∞–¥—Ä–∏ —Ö–æ–¥—å–±–∏: 0, 1, 2, 3, 4
        col = frameIndex % WALKING_FRAMES;
        // frameIndex —Ü–∏–∫–ª—ñ—á–Ω–æ: 0‚Üí1‚Üí2‚Üí3‚Üí4‚Üí0‚Üí1‚Üí2‚Üí3‚Üí4...
    } else {
        // –°—Ç–∞–Ω –∑—É–ø–∏–Ω–∫–∏ - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –∫–∞–¥—Ä 0
        col = 0;
    }
    
    return { row, col };
}
```

**–í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è:**
```
–°–ø—Ä–∞–π—Ç-–ª–∏—Å—Ç:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ [0,0] [0,1] [0,2] [0,3] [0,4]        ‚îÇ ‚Üê row=0 (–≤–ª—ñ–≤–æ)
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ [1,0] [1,1] [1,2] [1,3] [1,4]        ‚îÇ ‚Üê row=1 (–≤–ø—Ä–∞–≤–æ)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–ü—Ä–∏–∫–ª–∞–¥:
- deerDirection = -1 (–≤–ª—ñ–≤–æ), frameIndex = 2
- row = 0, col = 2
- –ö–∞–¥—Ä: [0,2] (—Ç—Ä–µ—Ç—ñ–π –∫–∞–¥—Ä –≤–µ—Ä—Ö–Ω—å–æ–≥–æ —Ä—è–¥—É)
```

---

## üñºÔ∏è –ú–∞–ª—é–≤–∞–Ω–Ω—è –Ω–∞ canvas

### –§—É–Ω–∫—Ü—ñ—è `drawCanvas()`

```javascript
function drawCanvas() {
    // 1. –û—á–∏—â–∞—î–º–æ –≤–µ—Å—å canvas
    ctx.clearRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);
    
    // 2. –ú–∞–ª—é—î–º–æ —Ñ–æ–Ω
    ctx.drawImage(images.background, 0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);
    
    // 3. –ú–∞–ª—é—î–º–æ —è–ª–∏–Ω–∫—É (—Å—Ç–∞—Ç–∏—á–Ω–∞)
    ctx.drawImage(images.tree, treeX, treeY, TREE_WIDTH, TREE_HEIGHT);
    
    // 4. –ú–∞–ª—é—î–º–æ –æ–ª–µ–Ω—è –∑—ñ —Å–ø—Ä–∞–π—Ç-–ª–∏—Å—Ç–∞
    const { row, col } = getSpriteFrameIndex();
    
    // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –∫–∞–¥—Ä—É –≤ —Å–ø—Ä–∞–π—Ç-–ª–∏—Å—Ç—ñ
    const sourceX = col * FRAME_WIDTH;   // 0, 220, 440, 660, 880
    const sourceY = row * FRAME_HEIGHT;  // 0 –∞–±–æ 234
    
    // –í–∏—Ä—ñ–∑–∞—î–º–æ –∫–∞–¥—Ä —Ç–∞ –º–∞–ª—é—î–º–æ –Ω–∞ canvas
    ctx.drawImage(
        images.deerSprite,           // –î–∂–µ—Ä–µ–ª–æ (—Å–ø—Ä–∞–π—Ç-–ª–∏—Å—Ç)
        sourceX, sourceY,            // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –≤ —Å–ø—Ä–∞–π—Ç-–ª–∏—Å—Ç—ñ (–∑–≤—ñ–¥–∫–∏ –≤–∏—Ä—ñ–∑–∞—Ç–∏)
        FRAME_WIDTH, FRAME_HEIGHT,   // –†–æ–∑–º—ñ—Ä –≤–∏—Ä—ñ–∑–∞–Ω–æ–≥–æ –∫–∞–¥—Ä—É
        deerX, deerY,                // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –Ω–∞ canvas (–∫—É–¥–∏ –º–∞–ª—é–≤–∞—Ç–∏)
        DEER_WIDTH, DEER_HEIGHT      // –†–æ–∑–º—ñ—Ä –Ω–∞ canvas (–º–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω–∏–π)
    );
}
```

**–ú–µ—Ç–æ–¥ `drawImage()` - –Ω–∞–π–≤–∞–∂–ª–∏–≤—ñ—à–∏–π:**

```javascript
ctx.drawImage(
    image,           // –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è-–¥–∂–µ—Ä–µ–ª–æ
    sx, sy,          // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –≤ –¥–∂–µ—Ä–µ–ª—ñ (source X, source Y)
    sWidth, sHeight, // –†–æ–∑–º—ñ—Ä –≤ –¥–∂–µ—Ä–µ–ª—ñ (source width, source height)
    dx, dy,          // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –Ω–∞ canvas (destination X, destination Y)
    dWidth, dHeight  // –†–æ–∑–º—ñ—Ä –Ω–∞ canvas (destination width, destination height)
);
```

**–ü—Ä–∏–∫–ª–∞–¥:**
```javascript
// –í–∏—Ä—ñ–∑–∞—î–º–æ –∫–∞–¥—Ä [0,2] (—Ç—Ä–µ—Ç—ñ–π –∫–∞–¥—Ä –≤–µ—Ä—Ö–Ω—å–æ–≥–æ —Ä—è–¥—É)
sourceX = 2 * 220 = 440  // –ü–æ—á–∞—Ç–æ–∫ —Ç—Ä–µ—Ç—å–æ–≥–æ –∫–∞–¥—Ä—É
sourceY = 0 * 234 = 0    // –í–µ—Ä—Ö–Ω—ñ–π —Ä—è–¥–æ–∫
FRAME_WIDTH = 220        // –®–∏—Ä–∏–Ω–∞ –∫–∞–¥—Ä—É
FRAME_HEIGHT = 234       // –í–∏—Å–æ—Ç–∞ –∫–∞–¥—Ä—É

// –ú–∞–ª—é—î–º–æ –Ω–∞ canvas –≤ –ø–æ–∑–∏—Ü—ñ—ó (500, 200) –∑ —Ä–æ–∑–º—ñ—Ä–æ–º 110√ó117
deerX = 500
deerY = 200
DEER_WIDTH = 110
DEER_HEIGHT = 117
```

---

## ‚öôÔ∏è –°–∏—Å—Ç–µ–º–∞ —Ç–∞–π–º–µ—Ä—ñ–≤ –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç—ñ

### –ö–æ–Ω—Ç—Ä–æ–ª—å —à–≤–∏–¥–∫–æ—Å—Ç—ñ –∞–Ω—ñ–º–∞—Ü—ñ—ó

```javascript
let frameCounter = 0;        // –õ—ñ—á–∏–ª—å–Ω–∏–∫ –∫–∞–¥—Ä—ñ–≤
const FRAME_DELAY = 12;     // –ó–∞—Ç—Ä–∏–º–∫–∞ –º—ñ–∂ –∑–º—ñ–Ω–∞–º–∏ –∫–∞–¥—Ä—ñ–≤

let frameIndex = 0;         // –ü–æ—Ç–æ—á–Ω–∏–π —ñ–Ω–¥–µ–∫—Å –∫–∞–¥—Ä—É (0-4)
let frameRepeatCounter = 0; // –õ—ñ—á–∏–ª—å–Ω–∏–∫ –ø–æ–≤—Ç–æ—Ä–µ–Ω—å
const FRAME_REPEAT = 2;     // –ö–æ–∂–µ–Ω –∫–∞–¥—Ä –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è 2 —Ä–∞–∑–∏
```

**–Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î:**

```
–ö–∞–¥—Ä 1: frameCounter = 0, frameIndex = 0, frameRepeatCounter = 0
–ö–∞–¥—Ä 2: frameCounter = 1, frameIndex = 0, frameRepeatCounter = 0
...
–ö–∞–¥—Ä 12: frameCounter = 12 (>= FRAME_DELAY)
  ‚Üí frameCounter = 0
  ‚Üí frameRepeatCounter = 1 (< FRAME_REPEAT)
  ‚Üí frameIndex –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è 0 (–ø–æ–∫–∞–∑—É—î–º–æ —Ç–æ–π —Å–∞–º–∏–π –∫–∞–¥—Ä —â–µ —Ä–∞–∑)

–ö–∞–¥—Ä 13: frameCounter = 1, frameIndex = 0, frameRepeatCounter = 1
...
–ö–∞–¥—Ä 24: frameCounter = 12 (>= FRAME_DELAY)
  ‚Üí frameCounter = 0
  ‚Üí frameRepeatCounter = 2 (>= FRAME_REPEAT)
  ‚Üí frameRepeatCounter = 0
  ‚Üí frameIndex = 1 (–ø–µ—Ä–µ—Ö–æ–¥–∏–º–æ –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –∫–∞–¥—Ä—É)
```

**–ß–æ–º—É —Ü–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ:**
- –ë–µ–∑ –∑–∞—Ç—Ä–∏–º–∫–∏ –∫–∞–¥—Ä–∏ –∑–º—ñ–Ω—é–≤–∞–ª–∏—Å—è –± –∑–∞–Ω–∞–¥—Ç–æ —à–≤–∏–¥–∫–æ (60 —Ä–∞–∑—ñ–≤ –Ω–∞ —Å–µ–∫—É–Ω–¥—É)
- `FRAME_DELAY` –∫–æ–Ω—Ç—Ä–æ–ª—é—î, —è–∫ —á–∞—Å—Ç–æ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –∫–∞–¥—Ä
- `FRAME_REPEAT` –¥–æ–∑–≤–æ–ª—è—î –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ –∫–æ–∂–µ–Ω –∫–∞–¥—Ä –∫—ñ–ª—å–∫–∞ —Ä–∞–∑—ñ–≤ –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç—ñ

---

## üèÉ –õ–æ–≥—ñ–∫–∞ —Ä—É—Ö—É —Ç–∞ —Å—Ç–∞–Ω—ñ–≤

### –§—É–Ω–∫—Ü—ñ—è `animate()` - —Å–µ—Ä—Ü–µ –∞–Ω—ñ–º–∞—Ü—ñ—ó

```javascript
function animate() {
    // 1. –û–Ω–æ–≤–ª—é—î–º–æ –ª—ñ—á–∏–ª—å–Ω–∏–∫ –∫–∞–¥—Ä—ñ–≤
    frameCounter++;
    
    // 2. –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–º—ñ–Ω–∏—Ç–∏ –∫–∞–¥—Ä
    if (frameCounter >= FRAME_DELAY) {
        frameCounter = 0;
        if (deerState === DEER_STATE.WALKING) {
            frameRepeatCounter++;
            if (frameRepeatCounter >= FRAME_REPEAT) {
                frameRepeatCounter = 0;
                frameIndex = (frameIndex + 1) % WALKING_FRAMES;
                // –¶–∏–∫–ª—ñ—á–Ω–æ: 0‚Üí1‚Üí2‚Üí3‚Üí4‚Üí0‚Üí1‚Üí2‚Üí3‚Üí4...
            }
        }
    }
    
    // 3. –õ–æ–≥—ñ–∫–∞ —Ä—É—Ö—É
    if (deerState === DEER_STATE.WALKING) {
        // –†—É—Ö–∞—î–º–æ –æ–ª–µ–Ω—è
        deerX += deerSpeed * deerDirection;
        // deerSpeed = 0.5, deerDirection = -1 –∞–±–æ 1
        
        // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –º–µ–∂—ñ
        if (deerX >= deerMaxX && deerDirection === 1) {
            // –î–æ—Å—è–≥–ª–∏ –ø—Ä–∞–≤–æ–≥–æ –∫—Ä–∞—é
            deerX = deerMaxX;
            deerState = DEER_STATE.IDLE;
            idleTimer = 0;
            idleDuration = Math.floor(Math.random() * (180 - 60 + 1)) + 60;
            // –í–∏–ø–∞–¥–∫–æ–≤–∞ —Ç—Ä–∏–≤–∞–ª—ñ—Å—Ç—å: 60-180 –∫–∞–¥—Ä—ñ–≤ (1-3 —Å–µ–∫—É–Ω–¥–∏)
        } else if (deerX <= deerMinX && deerDirection === -1) {
            // –î–æ—Å—è–≥–ª–∏ –ª—ñ–≤–æ–≥–æ –∫—Ä–∞—é
            deerX = deerMinX;
            deerState = DEER_STATE.IDLE;
            idleTimer = 0;
            idleDuration = Math.floor(Math.random() * (180 - 60 + 1)) + 60;
        }
    } else if (deerState === DEER_STATE.IDLE) {
        // –û–ª–µ–Ω—å —Å—Ç–æ—ó—Ç—å
        idleTimer++;
        
        if (idleTimer >= idleDuration) {
            // –ß–∞—Å –∑–∞–∫—ñ–Ω—á–∏–≤—Å—è - –ø–æ—á–∏–Ω–∞—î–º–æ —Ä—É—Ö
            deerDirection *= -1;  // –ó–º—ñ–Ω—é—î–º–æ –Ω–∞–ø—Ä—è–º–æ–∫: -1 ‚Üí 1 –∞–±–æ 1 ‚Üí -1
            deerState = DEER_STATE.WALKING;
            frameIndex = 0;
            frameRepeatCounter = 0;
        }
    }
    
    // 4. –ü–µ—Ä–µ–º–∞–ª—å–æ–≤—É—î–º–æ canvas
    drawCanvas();
    
    // 5. –ó–∞–ø—É—Å–∫–∞—î–º–æ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –∫–∞–¥—Ä –∞–Ω—ñ–º–∞—Ü—ñ—ó
    animationId = requestAnimationFrame(animate);
}
```

**–ü–æ—Ç—ñ–∫ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è:**
```
1. frameCounter++ (–∫–æ–∂–µ–Ω –∫–∞–¥—Ä)
2. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ FRAME_DELAY ‚Üí –∑–º—ñ–Ω–∞ –∫–∞–¥—Ä—É —Å–ø—Ä–∞–π—Ç—É
3. –û–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–æ–∑–∏—Ü—ñ—ó (—è–∫—â–æ WALKING)
4. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –º–µ–∂ ‚Üí –∑–º—ñ–Ω–∞ —Å—Ç–∞–Ω—É
5. –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞–π–º–µ—Ä–∞ –∑—É–ø–∏–Ω–∫–∏ (—è–∫—â–æ IDLE)
6. –ú–∞–ª—é–≤–∞–Ω–Ω—è –Ω–∞ canvas
7. –ó–∞–ø–∏—Ç –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –∫–∞–¥—Ä—É
```

---

## üîÑ requestAnimationFrame - —Ü–∏–∫–ª –∞–Ω—ñ–º–∞—Ü—ñ—ó

```javascript
function animate() {
    // ... –ª–æ–≥—ñ–∫–∞ –∞–Ω—ñ–º–∞—Ü—ñ—ó ...
    
    animationId = requestAnimationFrame(animate);
    // –ó–∞–ø–∏—Ç—É—î–º–æ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –∫–∞–¥—Ä (–≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è ~60 —Ä–∞–∑—ñ–≤ –Ω–∞ —Å–µ–∫—É–Ω–¥—É)
}
```

**–©–æ —Ä–æ–±–∏—Ç—å `requestAnimationFrame`:**
- –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É—î—Ç—å—Å—è –∑ —á–∞—Å—Ç–æ—Ç–æ—é –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –µ–∫—Ä–∞–Ω—É (–∑–∞–∑–≤–∏—á–∞–π 60 FPS)
- –í–∏–∫–ª–∏–∫–∞—î —Ñ—É–Ω–∫—Ü—ñ—é –ø–µ—Ä–µ–¥ –Ω–∞—Å—Ç—É–ø–Ω–∏–º –ø–µ—Ä–µ–º–∞–ª—å–æ–≤—É–≤–∞–Ω–Ω—è–º –µ–∫—Ä–∞–Ω—É
- –û–ø—Ç–∏–º—ñ–∑—É—î –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å (–∑—É–ø–∏–Ω—è—î—Ç—å—Å—è, –∫–æ–ª–∏ –≤–∫–ª–∞–¥–∫–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞)

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ (–ù–ï –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏):**
```javascript
setInterval(animate, 16);  // ~60 FPS, –∞–ª–µ –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω–æ –∑ –µ–∫—Ä–∞–Ω–æ–º
```

---

## üéØ –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è: IntersectionObserver

```javascript
const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            // Canvas –≤–∏–¥–∏–º–∏–π - –∑–∞–ø—É—Å–∫–∞—î–º–æ –∞–Ω—ñ–º–∞—Ü—ñ—é
            if (!animationId) {
                startAnimation();
            }
        } else {
            // Canvas –Ω–µ –≤–∏–¥–∏–º–∏–π - –∑—É–ø–∏–Ω—è—î–º–æ –∞–Ω—ñ–º–∞—Ü—ñ—é
            if (animationId) {
                cancelAnimationFrame(animationId);
                animationId = null;
            }
        }
    });
});

observer.observe(canvas);
```

**–ß–æ–º—É —Ü–µ –≤–∞–∂–ª–∏–≤–æ:**
- –ï–∫–æ–Ω–æ–º–∏—Ç—å —Ä–µ—Å—É—Ä—Å–∏ –ø—Ä–æ—Ü–µ—Å–æ—Ä–∞
- –ó—É–ø–∏–Ω—è—î –∞–Ω—ñ–º–∞—Ü—ñ—é, –∫–æ–ª–∏ canvas –Ω–µ –≤–∏–¥–∏–º–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—ñ–¥–Ω–æ–≤–ª—é—î –ø—Ä–∏ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—ñ –≤ viewport

---

## üìù –ü–æ–∫—Ä–æ–∫–æ–≤–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞–Ω—ñ–º–∞—Ü—ñ—ó

### –ö—Ä–æ–∫ 1: –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞
```javascript
// 1. –û—Ç—Ä–∏–º–∞—Ç–∏ canvas
const canvas = document.querySelector('#myCanvas');
const ctx = canvas.getContext('2d');

// 2. –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ —Ä–æ–∑–º—ñ—Ä–∏
canvas.width = 800;
canvas.height = 600;

// 3. –í–∏–∑–Ω–∞—á–∏—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ —Å–ø—Ä–∞–π—Ç-–ª–∏—Å—Ç–∞
const FRAMES_PER_ROW = 5;
const TOTAL_ROWS = 2;
const SPRITE_WIDTH = 1000;
const SPRITE_HEIGHT = 400;
const FRAME_WIDTH = SPRITE_WIDTH / FRAMES_PER_ROW;
const FRAME_HEIGHT = SPRITE_HEIGHT / TOTAL_ROWS;
```

### –ö—Ä–æ–∫ 2: –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å
```javascript
const sprite = new Image();
sprite.onload = () => {
    // –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ - –º–æ–∂–Ω–∞ –ø–æ—á–∏–Ω–∞—Ç–∏
    startAnimation();
};
sprite.src = 'path/to/sprite.png';
```

### –ö—Ä–æ–∫ 3: –ó–º—ñ–Ω–Ω—ñ —Å—Ç–∞–Ω—É
```javascript
let x = 100;              // –ü–æ–∑–∏—Ü—ñ—è X
let y = 100;              // –ü–æ–∑–∏—Ü—ñ—è Y
let direction = 1;        // –ù–∞–ø—Ä—è–º–æ–∫: -1 (–≤–ª—ñ–≤–æ) –∞–±–æ 1 (–≤–ø—Ä–∞–≤–æ)
let state = 'walking';    // –°—Ç–∞–Ω: 'walking' –∞–±–æ 'idle'
let frameIndex = 0;        // –Ü–Ω–¥–µ–∫—Å –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∫–∞–¥—Ä—É
let frameCounter = 0;      // –õ—ñ—á–∏–ª—å–Ω–∏–∫ –¥–ª—è –∑–∞—Ç—Ä–∏–º–∫–∏
const FRAME_DELAY = 10;   // –ó–∞—Ç—Ä–∏–º–∫–∞ –º—ñ–∂ –∫–∞–¥—Ä–∞–º–∏
```

### –ö—Ä–æ–∫ 4: –§—É–Ω–∫—Ü—ñ—è –≤–∏–±–æ—Ä—É –∫–∞–¥—Ä—É
```javascript
function getFrame() {
    const row = direction === -1 ? 0 : 1;
    const col = state === 'walking' ? frameIndex : 0;
    return { row, col };
}
```

### –ö—Ä–æ–∫ 5: –§—É–Ω–∫—Ü—ñ—è –º–∞–ª—é–≤–∞–Ω–Ω—è
```javascript
function draw() {
    // –û—á–∏—Å—Ç–∏—Ç–∏ canvas
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // –û—Ç—Ä–∏–º–∞—Ç–∏ –∫–∞–¥—Ä
    const { row, col } = getFrame();
    
    // –†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –≤ —Å–ø—Ä–∞–π—Ç-–ª–∏—Å—Ç—ñ
    const sourceX = col * FRAME_WIDTH;
    const sourceY = row * FRAME_HEIGHT;
    
    // –ú–∞–ª—é–≤–∞—Ç–∏ –∫–∞–¥—Ä
    ctx.drawImage(
        sprite,
        sourceX, sourceY, FRAME_WIDTH, FRAME_HEIGHT,
        x, y, FRAME_WIDTH, FRAME_HEIGHT
    );
}
```

### –ö—Ä–æ–∫ 6: –§—É–Ω–∫—Ü—ñ—è –∞–Ω—ñ–º–∞—Ü—ñ—ó
```javascript
function animate() {
    // –û–Ω–æ–≤–ª–µ–Ω–Ω—è –ª—ñ—á–∏–ª—å–Ω–∏–∫–∞
    frameCounter++;
    
    // –ó–º—ñ–Ω–∞ –∫–∞–¥—Ä—É
    if (frameCounter >= FRAME_DELAY) {
        frameCounter = 0;
        if (state === 'walking') {
            frameIndex = (frameIndex + 1) % FRAMES_PER_ROW;
        }
    }
    
    // –û–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–æ–∑–∏—Ü—ñ—ó
    if (state === 'walking') {
        x += 2 * direction;
        
        // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –º–µ–∂
        if (x > 700 || x < 100) {
            direction *= -1;
            state = 'idle';
            // ... –ª–æ–≥—ñ–∫–∞ –∑—É–ø–∏–Ω–∫–∏ ...
        }
    }
    
    // –ú–∞–ª—é–≤–∞–Ω–Ω—è
    draw();
    
    // –ù–∞—Å—Ç—É–ø–Ω–∏–π –∫–∞–¥—Ä
    requestAnimationFrame(animate);
}
```

### –ö—Ä–æ–∫ 7: –ó–∞–ø—É—Å–∫
```javascript
function startAnimation() {
    animate();
}
```

---

## üéì –ö–ª—é—á–æ–≤—ñ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—ó –¥–ª—è –∑–∞–ø–∞–º'—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è

### 1. **–°–ø—Ä–∞–π—Ç-–ª–∏—Å—Ç = —Å—ñ—Ç–∫–∞ –∫–∞–¥—Ä—ñ–≤**
- –†–æ–∑—Ä–∞—Ö–æ–≤—É—î–º–æ —Ä–æ–∑–º—ñ—Ä –∫–∞–¥—Ä—É: `—à–∏—Ä–∏–Ω–∞_—Å–ø—Ä–∞–π—Ç—É / –∫—ñ–ª—å–∫—ñ—Å—Ç—å_–∫–∞–¥—Ä—ñ–≤`
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –∫–∞–¥—Ä—É: `col * FRAME_WIDTH, row * FRAME_HEIGHT`

### 2. **drawImage() - –≤–∏—Ä—ñ–∑–∞–Ω–Ω—è —Ç–∞ –º–∞–ª—é–≤–∞–Ω–Ω—è**
```javascript
ctx.drawImage(image, sx, sy, sW, sH, dx, dy, dW, dH);
//            ‚Üë     ‚Üë   ‚Üë   ‚Üë   ‚Üë   ‚Üë   ‚Üë   ‚Üë   ‚Üë
//            |     |   |   |   |   |   |   |   ‚îî‚îÄ –í–∏—Å–æ—Ç–∞ –Ω–∞ canvas
//            |     |   |   |   |   |   |   ‚îî‚îÄ –®–∏—Ä–∏–Ω–∞ –Ω–∞ canvas
//            |     |   |   |   |   |   ‚îî‚îÄ Y –Ω–∞ canvas
//            |     |   |   |   |   ‚îî‚îÄ X –Ω–∞ canvas
//            |     |   |   |   ‚îî‚îÄ –í–∏—Å–æ—Ç–∞ –≤–∏—Ä—ñ–∑–∞–Ω–Ω—è
//            |     |   |   ‚îî‚îÄ –®–∏—Ä–∏–Ω–∞ –≤–∏—Ä—ñ–∑–∞–Ω–Ω—è
//            |     |   ‚îî‚îÄ Y –≤ —Å–ø—Ä–∞–π—Ç-–ª–∏—Å—Ç—ñ
//            |     ‚îî‚îÄ X –≤ —Å–ø—Ä–∞–π—Ç-–ª–∏—Å—Ç—ñ
//            ‚îî‚îÄ –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è-–¥–∂–µ—Ä–µ–ª–æ
```

### 3. **requestAnimationFrame - —Ü–∏–∫–ª –∞–Ω—ñ–º–∞—Ü—ñ—ó**
- –í–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è ~60 —Ä–∞–∑—ñ–≤ –Ω–∞ —Å–µ–∫—É–Ω–¥—É
- –ó–∞–≤–∂–¥–∏ –≤–∏–∫–ª–∏–∫–∞—î —Å–∞–º —Å–µ–±–µ –≤ –∫—ñ–Ω—Ü—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
- –ó—É–ø–∏–Ω—è—î—Ç—å—Å—è —á–µ—Ä–µ–∑ `cancelAnimationFrame(animationId)`

### 4. **–ö–æ–Ω—Ç—Ä–æ–ª—å —à–≤–∏–¥–∫–æ—Å—Ç—ñ –∞–Ω—ñ–º–∞—Ü—ñ—ó**
- `frameCounter` - –ª—ñ—á–∏–ª—å–Ω–∏–∫ –∫–∞–¥—Ä—ñ–≤
- `FRAME_DELAY` - –∑–∞—Ç—Ä–∏–º–∫–∞ –º—ñ–∂ –∑–º—ñ–Ω–∞–º–∏ –∫–∞–¥—Ä—ñ–≤
- `FRAME_REPEAT` - –ø–æ–≤—Ç–æ—Ä–µ–Ω–Ω—è –∫–∞–¥—Ä—ñ–≤ –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç—ñ

### 5. **State Machine (–º–∞—à–∏–Ω–∞ —Å—Ç–∞–Ω—ñ–≤)**
- –í–∏–∑–Ω–∞—á–∞—î –ø–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω –æ–±'—î–∫—Ç–∞
- –ö–æ–Ω—Ç—Ä–æ–ª—é—î –ø–µ—Ä–µ—Ö–æ–¥–∏ –º—ñ–∂ —Å—Ç–∞–Ω–∞–º–∏
- –ö–æ–∂–µ–Ω —Å—Ç–∞–Ω –º–∞—î —Å–≤–æ—é –ª–æ–≥—ñ–∫—É

---

## üí° –ü–æ—Ä–∞–¥–∏ –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–Ω—è –≤–ª–∞—Å–Ω–æ—ó –∞–Ω—ñ–º–∞—Ü—ñ—ó

1. **–ü–æ—á–Ω—ñ—Ç—å –∑ –ø—Ä–æ—Å—Ç–æ–≥–æ:**
   - –°–ø–æ—á–∞—Ç–∫—É –Ω–∞–º–∞–ª—é–π—Ç–µ –æ–¥–∏–Ω —Å—Ç–∞—Ç–∏—á–Ω–∏–π –∫–∞–¥—Ä
   - –ü–æ—Ç—ñ–º –¥–æ–¥–∞–π—Ç–µ —Ä—É—Ö
   - –ü–æ—Ç—ñ–º –¥–æ–¥–∞–π—Ç–µ –∑–º—ñ–Ω—É –∫–∞–¥—Ä—ñ–≤

2. **–¢–µ—Å—Ç—É–π—Ç–µ –ø–æ–∫—Ä–æ–∫–æ–≤–æ:**
   - –í–∏–≤–æ–¥—å—Ç–µ –∑–Ω–∞—á–µ–Ω–Ω—è –≤ –∫–æ–Ω—Å–æ–ª—å: `console.log(frameIndex, row, col)`
   - –ü–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏: `console.log(sourceX, sourceY)`

3. **–û–ø—Ç–∏–º—ñ–∑—É–π—Ç–µ –ø—ñ–∑–Ω—ñ—à–µ:**
   - –°–ø–æ—á–∞—Ç–∫—É –∑—Ä–æ–±—ñ—Ç—å –ø—Ä–∞—Ü—é—é—á—É –≤–µ—Ä—Å—ñ—é
   - –ü–æ—Ç—ñ–º –¥–æ–¥–∞–π—Ç–µ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó (IntersectionObserver, –∫–µ—à—É–≤–∞–Ω–Ω—è)

4. **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∏:**
   - –í—Å—ñ –º–∞–≥—ñ—á–Ω—ñ —á–∏—Å–ª–∞ –≤–∏–Ω–æ—Å—å—Ç–µ –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∏
   - –õ–µ–≥—à–µ –Ω–∞–ª–∞—à—Ç–æ–≤—É–≤–∞—Ç–∏ —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞—Ç–∏

5. **–†–æ–∑–¥—ñ–ª—è–π—Ç–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å:**
   - `getFrame()` - –≤–∏–±—ñ—Ä –∫–∞–¥—Ä—É
   - `draw()` - –º–∞–ª—é–≤–∞–Ω–Ω—è
   - `animate()` - –ª–æ–≥—ñ–∫–∞ –∞–Ω—ñ–º–∞—Ü—ñ—ó
   - `update()` - –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞–Ω—É

---

## üéØ –®–∞–±–ª–æ–Ω –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ —Å—Ç–∞—Ä—Ç—É

```javascript
function initSpriteAnimation(canvasId, spritePath, config) {
    const canvas = document.querySelector(canvasId);
    const ctx = canvas.getContext('2d');
    
    // –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
    const {
        framesPerRow = 5,
        totalRows = 2,
        spriteWidth = 1000,
        spriteHeight = 400,
        scale = 1,
        frameDelay = 10
    } = config;
    
    // –†–æ–∑—Ä–∞—Ö—É–Ω–∫–∏
    const frameWidth = spriteWidth / framesPerRow;
    const frameHeight = spriteHeight / totalRows;
    const displayWidth = frameWidth * scale;
    const displayHeight = frameHeight * scale;
    
    // –ó–º—ñ–Ω–Ω—ñ —Å—Ç–∞–Ω—É
    let x = 0, y = 0;
    let direction = 1;
    let state = 'walking';
    let frameIndex = 0;
    let frameCounter = 0;
    
    // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
    const sprite = new Image();
    sprite.onload = () => {
        canvas.width = spriteWidth;
        canvas.height = spriteHeight;
        animate();
    };
    sprite.src = spritePath;
    
    // –§—É–Ω–∫—Ü—ñ—ó
    function getFrame() {
        const row = direction === -1 ? 0 : 1;
        const col = state === 'walking' ? frameIndex : 0;
        return { row, col };
    }
    
    function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        const { row, col } = getFrame();
        ctx.drawImage(
            sprite,
            col * frameWidth, row * frameHeight, frameWidth, frameHeight,
            x, y, displayWidth, displayHeight
        );
    }
    
    function animate() {
        frameCounter++;
        if (frameCounter >= frameDelay) {
            frameCounter = 0;
            if (state === 'walking') {
                frameIndex = (frameIndex + 1) % framesPerRow;
            }
        }
        
        // –í–∞—à–∞ –ª–æ–≥—ñ–∫–∞ —Ä—É—Ö—É —Ç—É—Ç
        
        draw();
        requestAnimationFrame(animate);
    }
}

// –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
initSpriteAnimation('#myCanvas', 'sprite.png', {
    framesPerRow: 5,
    totalRows: 2,
    spriteWidth: 1100,
    spriteHeight: 468,
    scale: 0.5,
    frameDelay: 12
});
```

---

**–£—Å–ø—ñ—Ö—ñ–≤ —É —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –∞–Ω—ñ–º–∞—Ü—ñ–π! üöÄ**

